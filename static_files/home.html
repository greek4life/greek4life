<!DOCTYPE html>
<html>

<head>
  	<meta charset="utf-8">
  	<title></title>
  	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link href="./css/style.css" rel="stylesheet">
	<script src="https://code.jquery.com/jquery.js"></script>
	<script type="text/javascript">

	$(document).ready(() => {
		$('#readButton').click(() => {
			const requestURL = 'location/' + $('#locationBox').val();
			console.log('making ajax request to:', requestURL);

			$.ajax({
				url: requestURL,
				type: 'GET',
				dataType: 'json',
				success: (data) => {
					console.log('You received some data!', data);

					if (data && data.name) {
						$('#status').html('Successfully fetched data at URL: ' + requestURL);
						$('#artistName').html('Artist: ' + data.name);
						$('#artistGenre').html('Artist genre is: ' + data.genre);
						$('#artistSong').html('Sample Song: ' + data.song);
						$('#artistImage').attr('src', data.albumCover);
					} else {
						$('#status').html('Error: could not find item at URL: ' + requestURL);
						$('#artistLocation').html('');
						$('#artistGenre').html('');
						$('#artistSong').html('');
						$('#artistImage').attr('src', '').attr('width', '0px');
					}
				},
			});
		});


		$(document).ajaxError(() => {
			$('#status').html('Error: unknown ajaxError!');
		});
	});
</script>
</head>

<body>
	<h1>Hello, Producers!</h1>
	
	Search by City or Country: <input id="locationBox" type="text" size="20" />
	<button id="readButton">Go</button>

	<div id="artistName"></div>
	<div id="artistGenre"></div>
	<div id="artistSong"></div>
	<div id="artistImage"></div>

</body>

</html>